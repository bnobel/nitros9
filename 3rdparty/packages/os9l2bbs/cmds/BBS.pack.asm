         nam   BBS.pack
         ttl   program module       

* Disassembled 2010/01/24 10:35:34 by Disasm v1.5 (C) 1988 by RML

         ifp1
         use   /dd/defs/defsfile
         endc
tylg     set   Prgrm+Objct   
atrv     set   ReEnt+rev
rev      set   $01
         mod   eom,name,tylg,atrv,start,size
u0000    rmb   1
u0001    rmb   1
u0002    rmb   1
u0003    rmb   1
u0004    rmb   1
u0005    rmb   3
u0008    rmb   1
u0009    rmb   1
u000A    rmb   2
u000C    rmb   1
u000D    rmb   1
u000E    rmb   1
u000F    rmb   1
u0010    rmb   2
u0012    rmb   2
u0014    rmb   2
u0016    rmb   1
u0017    rmb   1
u0018    rmb   32
u0038    rmb   232
u0120    rmb   2
u0122    rmb   2
u0124    rmb   60
u0160    rmb   80
u01B0    rmb   2
u01B2    rmb   62
u01F0    rmb   400
size     equ   .
name     equ   *
         fcs   /BBS.pack/
         fcb   $43 C
         fcb   $6F o
         fcb   $70 p
         fcb   $79 y
         fcb   $72 r
         fcb   $69 i
         fcb   $67 g
         fcb   $68 h
         fcb   $74 t
         fcb   $20 
         fcb   $28 (
         fcb   $43 C
         fcb   $29 )
         fcb   $20 
         fcb   $31 1
         fcb   $39 9
         fcb   $38 8
         fcb   $38 8
         fcb   $42 B
         fcb   $79 y
         fcb   $20 
         fcb   $4B K
         fcb   $65 e
         fcb   $69 i
         fcb   $74 t
         fcb   $68 h
         fcb   $20 
         fcb   $41 A
         fcb   $6C l
         fcb   $70 p
         fcb   $68 h
         fcb   $6F o
         fcb   $6E n
         fcb   $73 s
         fcb   $6F o
         fcb   $4C L
         fcb   $69 i
         fcb   $63 c
         fcb   $65 e
         fcb   $6E n
         fcb   $63 c
         fcb   $65 e
         fcb   $64 d
         fcb   $20 
         fcb   $74 t
         fcb   $6F o
         fcb   $20 
         fcb   $41 A
         fcb   $6C l
         fcb   $70 p
         fcb   $68 h
         fcb   $61 a
         fcb   $20 
         fcb   $53 S
         fcb   $6F o
         fcb   $66 f
         fcb   $74 t
         fcb   $77 w
         fcb   $61 a
         fcb   $72 r
         fcb   $65 e
         fcb   $20 
         fcb   $54 T
         fcb   $65 e
         fcb   $63 c
         fcb   $68 h
         fcb   $6E n
         fcb   $6F o
         fcb   $6C l
         fcb   $6F o
         fcb   $67 g
         fcb   $69 i
         fcb   $65 e
         fcb   $73 s
         fcb   $41 A
         fcb   $6C l
         fcb   $6C l
         fcb   $20 
         fcb   $72 r
         fcb   $69 i
         fcb   $67 g
         fcb   $68 h
         fcb   $74 t
         fcb   $73 s
         fcb   $20 
         fcb   $72 r
         fcb   $65 e
         fcb   $73 s
         fcb   $65 e
         fcb   $72 r
         fcb   $76 v
         fcb   $65 e
         fcb   $64 d
         fcb   $EC l
         fcb   $E6 f
         fcb   $EA j
         fcb   $F5 u
         fcb   $E9 i
         fcb   $A0 
         fcb   $E2 b
         fcb   $ED m
         fcb   $F1 q
         fcb   $E9 i
         fcb   $F0 p
         fcb   $EF o
         fcb   $F4 t
         fcb   $F0 p
L0080    fcb   $42 B
         fcb   $42 B
         fcb   $53 S
         fcb   $2E .
         fcb   $6D m
         fcb   $73 s
         fcb   $67 g
         fcb   $0D 
L0088    fcb   $42 B
         fcb   $42 B
         fcb   $53 S
         fcb   $2E .
         fcb   $6D m
         fcb   $73 s
         fcb   $67 g
         fcb   $2E .
         fcb   $69 i
         fcb   $6E n
         fcb   $78 x
         fcb   $0D 
L0094    fcb   $42 B
         fcb   $42 B
         fcb   $73 s
         fcb   $2E .
         fcb   $6D m
         fcb   $73 s
         fcb   $67 g
         fcb   $2E .
         fcb   $6C l
         fcb   $73 s
         fcb   $74 t
         fcb   $0D 
L00A0    fcb   $0A 
         fcb   $4F O
         fcb   $6E n
         fcb   $65 e
         fcb   $20 
         fcb   $6D m
         fcb   $6F o
         fcb   $6D m
         fcb   $65 e
         fcb   $6E n
         fcb   $74 t
         fcb   $20 
         fcb   $70 p
         fcb   $6C l
         fcb   $65 e
         fcb   $61 a
         fcb   $73 s
         fcb   $65 e
         fcb   $2E .
         fcb   $2E .
         fcb   $2E .
         fcb   $0A 
         fcb   $0D 
L00B7    fcb   $6D m
         fcb   $73 s
         fcb   $67 g
         fcb   $2E .
         fcb   $73 s
         fcb   $63 c
         fcb   $72 r
         fcb   $61 a
         fcb   $74 t
         fcb   $63 c
         fcb   $68 h
         fcb   $0D 
L00C3    fcb   $69 i
         fcb   $6E n
         fcb   $78 x
         fcb   $2E .
         fcb   $73 s
         fcb   $63 c
         fcb   $72 r
         fcb   $61 a
         fcb   $74 t
         fcb   $63 c
         fcb   $68 h
         fcb   $0D 
L00CF    fcb   $2E .
         fcb   $0D 
         fcb   $52 R
         fcb   $65 e
         fcb   $6E n
         fcb   $61 a
         fcb   $6D m
         fcb   $65 e
         fcb   $0D 
L00D8    fcb   $50 P
         fcb   $61 a
         fcb   $63 c
         fcb   $6B k
         fcb   $69 i
         fcb   $6E n
         fcb   $67 g
         fcb   $20 
         fcb   $6D m
         fcb   $65 e
         fcb   $73 s
         fcb   $73 s
         fcb   $61 a
         fcb   $67 g
         fcb   $65 e
         fcb   $2E .
         fcb   $2E .
         fcb   $2E .
         fcb   $0D 
start    equ   *
         lda   ,x
         cmpa  #$0D
         beq   L00FA
         lda   #$01
         os9   I$ChgDir 
         lbcs  L02F7
L00FA    leax  >u01F0,u
         stx   <u0014,u
         clr   <u0016,u
         clr   <u0017,u
         os9   F$ID     
         sty   u000A,u
         ldy   #$0000
         os9   F$SUser  
         clr   u0009,u
         clr   u0008,u
         leax  >L00A0,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
         leax  >L0088,pcr
         lda   #$01
         os9   I$Open   
         lbcs  L02F7
         sta   ,u
         leax  >L0080,pcr
         lda   #$01
         os9   I$Open   
         lbcs  L02F7
         sta   u0001,u
         leax  >L00B7,pcr
         lda   #$02
         ldb   #$0B
         os9   I$Create 
         lbcs  L02F7
         sta   u0002,u
         leax  >L00C3,pcr
         lda   #$02
         ldb   #$0B
         os9   I$Create 
         sta   u0003,u
         clr   u000C,u
         clr   u000D,u
         clr   u000E,u
         clr   u000F,u
         leax  >u0120,u
         ldy   #$0040
         lda   ,u
         os9   I$Read   
         lbcs  L02F7
         lda   u0002,u
         os9   I$Write  
L017F    ldd   <u0016,u
         addd  #$0001
         std   <u0016,u
         leax  >u01B0,u
         ldy   #$0040
         lda   ,u
         os9   I$Read   
         lbcs  L0222
         cmpy  #$0040
         lbne  L0222
         ldd   >u01B0,u
         cmpd  #$FFFF
         beq   L01E7
         ldd   u000C,u
         std   >u01B0,u
         ldd   u000E,u
         std   >u01B2,u
         lda   u0002,u
         os9   I$Write  
L01BC    lda   u0001,u
         leax  >u0160,u
         ldy   #$0050
         os9   I$ReadLn 
         bcs   L0222
         lda   u0003,u
         os9   I$WritLn 
         tfr   y,d
         addd  u000E,u
         std   u000E,u
         bcc   L01DF
         ldd   u000C,u
         addd  #$0001
         std   u000C,u
L01DF    cmpy  #$0001
         bhi   L01BC
         bra   L017F
L01E7    ldx   <u0014,u
         ldd   <u0016,u
         std   ,x++
         stx   <u0014,u
         leax  >L00D8,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
         ldd   >u0120,u
         subd  #$0001
         std   >u0120,u
L020A    lda   u0001,u
         leax  >u0160,u
         ldy   #$0050
         os9   I$ReadLn 
         bcs   L0222
         cmpy  #$0001
         bhi   L020A
         lbra  L017F
L0222    ldd   u000C,u
         std   >u0122,u
         ldd   u000E,u
         std   >u0124,u
         pshs  u
         lda   u0002,u
         ldx   #$0000
         ldu   #$0000
         os9   I$Seek   
         puls  u
         lbcs  L02F7
         leax  >u0120,u
         ldy   #$0040
         lda   u0002,u
         os9   I$Write  
         lda   ,u
         os9   I$Close  
         lbcs  L02F7
         lda   u0001,u
         os9   I$Close  
         lbcs  L02F7
         lda   u0002,u
         os9   I$Close  
         lbcs  L02F7
         lda   u0003,u
         os9   I$Close  
         lbcs  L02F7
         leax  >L0088,pcr
         os9   I$Delete 
         lbcs  L02F7
         leax  >L0080,pcr
         os9   I$Delete 
         lbcs  L02F7
         leax  >L00B7,pcr
         leay  >L0088,pcr
         lbsr  L0304
         leax  >L00C3,pcr
         leay  >L0080,pcr
         lbsr  L0304
         leax  >L0094,pcr
         lda   #$03
         os9   I$Open   
         lbcs  L02F6
         sta   u0004,u
L02AD    lda   u0004,u
         leax  <u0010,u
         ldy   #$0004
         os9   I$Read   
         lbcs  L02F6
         leax  >u01F0,u
         clr   u0009,u
L02C3    ldd   ,x++
         cmpd  <u0012,u
         bhi   L02CD
         inc   u0009,u
L02CD    cmpx  <u0014,u
         bcs   L02C3
         ldd   <u0012,u
         subd  u0008,u
         std   <u0012,u
         lda   u0004,u
         ldb   #$05
         pshs  u
         os9   I$GetStt 
         leau  -u0002,u
         os9   I$Seek   
         puls  u
         leax  <u0012,u
         ldy   #$0002
         os9   I$Write  
         bra   L02AD
L02F6    clrb  
L02F7    pshs  b
         ldy   u000A,u
         os9   F$SUser  
         puls  b
         os9   F$Exit   
L0304    leax  >L00CF,pcr
         lda   #$83
         os9   I$Open   
         lbcs  L02F7
         sta   u0005,u
         clr   <u0038,u
L0316    pshs  u
         lda   <u0038,u
         inca  
         sta   <u0038,u
         ldb   #$20
         mul   
         tfr   d,x
         lda   u0005,u
         ldu   #$0000
         exg   x,u
         os9   I$Seek   
         puls  u
         leax  <u0018,u
         ldy   #$0020
         lda   u0005,u
         os9   I$Read   
         bcs   L0362
         leay  >L00B7,pcr
         leax  <u0018,u
L0345    lda   ,x+
         bmi   L036E
         cmpa  ,y+
         bne   L034F
         bra   L0345
L034F    leax  <u0018,u
         leay  >L00C3,pcr
L0356    lda   ,x+
         bmi   L0383
         cmpa  ,y+
         bne   L0360
         bra   L0356
L0360    bra   L0316
L0362    cmpb  #$D3
         lbne  L02F7
         lda   u0005,u
         os9   I$Close  
         rts   
L036E    anda  #$7F
         cmpa  ,y+
         bne   L034F
         lda   ,y+
         cmpa  #$0D
         bne   L034F
         leax  <u0018,u
         leay  >L0088,pcr
         bra   L0396
L0383    anda  #$7F
         cmpa  ,y+
         bne   L0360
         lda   #$0D
         cmpa  ,y+
         bne   L0360
         leax  <u0018,u
         leay  >L0080,pcr
L0396    lda   ,y+
         cmpa  #$0D
         beq   L03A0
         sta   ,x+
         bra   L0396
L03A0    lda   ,-x
         ora   #$80
         sta   ,x
         lda   <u0038,u
         ldb   #$20
         mul   
         tfr   d,x
         lda   u0005,u
         ldb   #$05
         pshs  u
         ldu   #$0000
         exg   x,u
         os9   I$Seek   
         lbcs  L02F7
         puls  u
         leax  <u0018,u
         ldy   #$0020
         lda   u0005,u
         os9   I$Write  
         ldb   #$D3
         lbra  L0362
         lbra  L0316
         emod
eom      equ   *
         end
