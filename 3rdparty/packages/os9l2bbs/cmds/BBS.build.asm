         nam   BBS.build
         ttl   program module       

* Disassembled 2010/01/24 10:29:53 by Disasm v1.5 (C) 1988 by RML

         ifp1
         use   /dd/defs/defsfile
         endc
tylg     set   Prgrm+Objct   
atrv     set   ReEnt+rev
rev      set   $01
         mod   eom,name,tylg,atrv,start,size
u0000    rmb   2
u0002    rmb   1
u0003    rmb   1
u0004    rmb   1
u0005    rmb   2
u0007    rmb   1
u0008    rmb   1
u0009    rmb   2
u000B    rmb   1
u000C    rmb   1
u000D    rmb   2
u000F    rmb   2
u0011    rmb   3
u0014    rmb   80
u0064    rmb   32
u0084    rmb   8200
size     equ   .
name     equ   *
         fcs   /BBS.build/
         fcb   $43 C
         fcb   $6F o
         fcb   $70 p
         fcb   $79 y
         fcb   $72 r
         fcb   $69 i
         fcb   $67 g
         fcb   $68 h
         fcb   $74 t
         fcb   $20 
         fcb   $28 (
         fcb   $43 C
         fcb   $29 )
         fcb   $20 
         fcb   $31 1
         fcb   $39 9
         fcb   $38 8
         fcb   $38 8
         fcb   $42 B
         fcb   $79 y
         fcb   $20 
         fcb   $4B K
         fcb   $65 e
         fcb   $69 i
         fcb   $74 t
         fcb   $68 h
         fcb   $20 
         fcb   $41 A
         fcb   $6C l
         fcb   $70 p
         fcb   $68 h
         fcb   $6F o
         fcb   $6E n
         fcb   $73 s
         fcb   $6F o
         fcb   $4C L
         fcb   $69 i
         fcb   $63 c
         fcb   $65 e
         fcb   $6E n
         fcb   $63 c
         fcb   $65 e
         fcb   $64 d
         fcb   $20 
         fcb   $74 t
         fcb   $6F o
         fcb   $20 
         fcb   $41 A
         fcb   $6C l
         fcb   $70 p
         fcb   $68 h
         fcb   $61 a
         fcb   $20 
         fcb   $53 S
         fcb   $6F o
         fcb   $66 f
         fcb   $74 t
         fcb   $77 w
         fcb   $61 a
         fcb   $72 r
         fcb   $65 e
         fcb   $20 
         fcb   $54 T
         fcb   $65 e
         fcb   $63 c
         fcb   $68 h
         fcb   $6E n
         fcb   $6F o
         fcb   $6C l
         fcb   $6F o
         fcb   $67 g
         fcb   $69 i
         fcb   $65 e
         fcb   $73 s
         fcb   $41 A
         fcb   $6C l
         fcb   $6C l
         fcb   $20 
         fcb   $72 r
         fcb   $69 i
         fcb   $67 g
         fcb   $68 h
         fcb   $74 t
         fcb   $73 s
         fcb   $20 
         fcb   $72 r
         fcb   $65 e
         fcb   $73 s
         fcb   $65 e
         fcb   $72 r
         fcb   $76 v
         fcb   $65 e
         fcb   $64 d
         fcb   $EC l
         fcb   $E6 f
         fcb   $EA j
         fcb   $F5 u
         fcb   $E9 i
         fcb   $A0 
         fcb   $E2 b
         fcb   $ED m
         fcb   $F1 q
         fcb   $E9 i
         fcb   $F0 p
         fcb   $EF o
         fcb   $F4 t
         fcb   $F0 p
L0081    fcb   $0A 
         fcb   $0A 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $50 P
         fcb   $6C l
         fcb   $65 e
         fcb   $61 a
         fcb   $73 s
         fcb   $65 e
         fcb   $20 
         fcb   $65 e
         fcb   $6E n
         fcb   $74 t
         fcb   $65 e
         fcb   $72 r
         fcb   $20 
         fcb   $6D m
         fcb   $65 e
         fcb   $73 s
         fcb   $73 s
         fcb   $61 a
         fcb   $67 g
         fcb   $65 e
         fcb   $20 
         fcb   $6E n
         fcb   $6F o
         fcb   $77 w
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $20 
         fcb   $28 (
         fcb   $42 B
         fcb   $6C l
         fcb   $61 a
         fcb   $6E n
         fcb   $6B k
         fcb   $20 
         fcb   $6C l
         fcb   $69 i
         fcb   $6E n
         fcb   $65 e
         fcb   $20 
         fcb   $65 e
         fcb   $6E n
         fcb   $64 d
         fcb   $73 s
         fcb   $29 )
         fcb   $0D 
L00BD    fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $2D -
         fcb   $0D 
L00FE    fcb   $0A 
         fcb   $5B [
         fcb   $41 A
         fcb   $5D ]
         fcb   $62 b
         fcb   $6F o
         fcb   $72 r
         fcb   $74 t
         fcb   $20 
         fcb   $5B [
         fcb   $44 D
         fcb   $5D ]
         fcb   $6F o
         fcb   $6E n
         fcb   $65 e
         fcb   $20 
         fcb   $5B [
         fcb   $45 E
         fcb   $5D ]
         fcb   $64 d
         fcb   $69 i
         fcb   $74 t
         fcb   $20 
         fcb   $5B [
         fcb   $43 C
         fcb   $5D ]
         fcb   $6F o
         fcb   $6E n
         fcb   $74 t
         fcb   $69 i
         fcb   $6E n
         fcb   $75 u
         fcb   $65 e
         fcb   $20 
         fcb   $6F o
         fcb   $72 r
         fcb   $20 
         fcb   $5B [
         fcb   $4C L
         fcb   $5D ]
         fcb   $69 i
         fcb   $73 s
         fcb   $74 t
         fcb   $0D 
L012A    fcb   $45 E
         fcb   $6E n
         fcb   $74 t
         fcb   $65 e
         fcb   $72 r
         fcb   $20 
         fcb   $6C l
         fcb   $69 i
         fcb   $6E n
         fcb   $65 e
         fcb   $20 
         fcb   $23 #
         fcb   $0D 
L0137    fcb   $3E >
L0138    fcb   $0A 
         fcb   $0D 
L013A    fcb   $08 
         fcb   $20 
         fcb   $08 
start    equ   *
         stx   u0005,u
         lda   #$02
         ldb   #$1B
         os9   I$Create 
         lbcs  L030D
         sta   ,u
         leax  >L0081,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
         lbcs  L030D
         leax  >L00BD,pcr
         ldy   #$0050
         os9   I$WritLn 
         lbcs  L030D
         ldd   #$0000
         std   u0007,u
         sta   u0004,u
L0173    ldd   u0007,u
         addd  #$0001
         std   u0007,u
         cmpd  #$0063
         bge   L018B
         lbsr  L0290
         cmpy  #$0001
         bls   L018B
         bra   L0173
L018B    leax  >L00FE,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
         leax  >L0137,pcr
         ldy   #$0001
         os9   I$Write  
         leax  u0003,u
         clra  
         ldy   #$0001
         os9   I$Read   
         leax  >L0138,pcr
         ldy   #$0001
         lda   #$01
         os9   I$WritLn 
         lda   u0003,u
         anda  #$DF
         cmpa  #$41
         lbeq  L0310
         cmpa  #$44
         lbeq  L02DF
         cmpa  #$45
         beq   L01E1
         cmpa  #$43
         beq   L01D8
         cmpa  #$4C
         beq   L0251
         bra   L018B
L01D8    ldd   u0007,u
         subd  #$0001
         std   u0007,u
         bra   L0173
L01E1    leax  >L012A,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
         leax  >L0137,pcr
         ldy   #$0001
         os9   I$Write  
         clra  
         leax  <u0011,u
         ldy   #$0003
         os9   I$ReadLn 
         lbsr  L04AD
         cmpd  u0007,u
         lbcc  L018B
         std   u000F,u
         leax  <u0011,u
         lbsr  L0514
         leax  <u0011,u
         lda   #$3A
         sta   $02,x
         ldy   #$0003
         lda   #$01
         os9   I$Write  
         ldd   u000F,u
         leax  >u0084,u
         lda   #$50
         mul   
         leax  d,x
         ldy   #$0050
         lda   #$01
         os9   I$WritLn 
         tfr   y,d
         stb   u0004,u
         dec   u0004,u
         leay  <u0014,u
L0243    lda   ,x+
         sta   ,y+
         decb  
         bne   L0243
         ldd   u000F,u
         bsr   L0290
         lbra  L018B
L0251    ldd   #$0000
         std   u0007,u
L0256    ldd   u0007,u
         addd  #$0001
         std   u0007,u
         leax  <u0011,u
         lbsr  L0514
         leax  <u0011,u
         lda   #$3A
         sta   $02,x
         lda   #$01
         ldy   #$0003
         os9   I$Write  
         leax  >u0084,u
         ldd   u0007,u
         lda   #$50
         mul   
         leax  d,x
         ldy   #$0050
         lda   #$01
         os9   I$WritLn 
         cmpy  #$0001
         bhi   L0256
         lbra  L018B
L0290    leax  <u0011,u
         pshs  b,a
         lbsr  L0514
         leax  <u0011,u
         lda   #$3A
         sta   $02,x
         lda   #$01
         ldy   #$0003
         os9   I$Write  
         lbcs  L030D
         leax  <u0014,u
         ldb   u0004,u
         clra  
         tfr   d,y
         lda   #$01
         os9   I$Write  
         puls  b,a
         lda   #$50
         mul   
         leax  >u0084,u
         leax  d,x
         leay  <u0014,u
         ldb   #$50
         lda   u0004,u
         beq   L02D8
         sta   u000B,u
L02CF    lda   ,y+
         sta   ,x+
         decb  
         dec   u000B,u
         bne   L02CF
L02D8    clra  
         tfr   d,y
         lbsr  L0320
         rts   
L02DF    lda   #$00
         sta   u0009,u
L02E3    lda   u0009,u
         inca  
         sta   u0009,u
         cmpa  u0008,u
         bhi   L030C
         ldb   #$50
         mul   
         leax  >u0084,u
         leax  d,x
         ldy   #$0050
         lda   ,u
         os9   I$WritLn 
         lbcs  L030D
         cmpy  #$0001
         bls   L030C
         tfr   y,d
         bra   L02E3
L030C    clrb  
L030D    os9   F$Exit   
L0310    lda   ,u
         os9   I$Close  
         ldx   u0005,u
         lda   #$01
         os9   I$Delete 
         bcs   L030D
         bra   L030C
L0320    lbsr  L0478
         ldb   u0004,u
         leay  b,y
         pshs  y
         negb  
         sex   
         leay  d,y
         clr   u0004,u
         cmpy  #$0000
         lbeq  L03EF
         pshs  y,x
         lda   #$0D
L033B    sta   ,x+
         leay  -$01,y
         bne   L033B
         puls  y,x
L0343    pshs  y,x
         leax  u0003,u
         ldy   #$0001
         clra  
         os9   I$Read   
         bcs   L037C
         lda   u0003,u
         cmpa  #$01
         beq   L0380
         cmpa  #$08
         beq   L03A2
         cmpa  #$18
         beq   L03C6
         cmpa  #$0D
         lbeq  L03ED
         cmpa  #$20
         bcs   L037C
         lda   #$01
         os9   I$Write  
         puls  y,x
         lda   u0003,u
         sta   ,x+
         leay  -$01,y
         lbeq  L0416
         bra   L0343
L037C    puls  y,x
         bra   L0343
L0380    puls  y,x
         leay  -$01,y
         beq   L039D
         lda   ,x+
         cmpa  #$0D
         beq   L039B
         pshs  y,x
         leax  -$01,x
         ldy   #$0001
         lda   #$01
         os9   I$Write  
         bra   L0380
L039B    leax  -$01,x
L039D    leay  $01,y
         lbra  L0343
L03A2    puls  y,x
         leay  $01,y
         cmpy  ,s
         bhi   L03C1
         pshs  y,x
         leax  >L013A,pcr
         ldy   #$0003
         lda   #$01
         os9   I$Write  
         puls  y,x
         leax  -$01,x
         lbra  L0343
L03C1    leay  -$01,y
         lbra  L0343
L03C6    puls  y,x
         leay  $01,y
         cmpy  ,s
         bhi   L03C1
         pshs  y,x
         leax  >L013A,pcr
         ldy   #$0003
         lda   #$01
         os9   I$Write  
         puls  y,x
         leax  -$01,x
         cmpy  ,s
         lbhi  L0343
         pshs  y,x
         bra   L03C6
L03ED    puls  y,x
L03EF    lda   #$0D
         sta   ,x+
         pshs  y,x
         leax  >L0138,pcr
         ldy   #$0001
         lda   #$01
         os9   I$WritLn 
         puls  y,x
         puls  b,a
         pshs  y
         subd  ,s
         leas  $02,s
         tfr   d,y
         leay  $01,y
         lbsr  L0491
         rts   
         puls  y,x
L0416    puls  b,a
         pshs  y
         subd  ,s
         leas  $02,s
         addd  #$0001
         tfr   d,y
         clrb  
L0424    leay  -$01,y
         beq   L0442
         lda   ,-x
         cmpa  #$20
         beq   L0453
         pshs  y,x
         leax  >L013A,pcr
         ldy   #$0003
         lda   #$01
         os9   I$Write  
         incb  
         puls  y,x
         bra   L0424
L0442    lda   #$0D
         sta   <$4F,x
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
         puls  y
         rts   
L0453    lda   #$0D
         sta   ,x+
         pshs  y,x
         stb   u0004,u
         leay  <u0014,u
L045E    lda   ,x+
         sta   ,y+
         decb  
         bne   L045E
         leax  >L0138,pcr
         ldy   #$0001
         lda   #$01
         os9   I$WritLn 
         puls  y,x
         lbsr  L0491
         rts   
L0478    pshs  y,x,b,a
         leax  <u0064,u
         clra  
         ldb   #$00
         os9   I$GetStt 
         leax  <-$20,x
         clr   <$24,x
         leax  <$20,x
         os9   I$SetStt 
         puls  pc,y,x,b,a
L0491    pshs  y,x,b,a
         leax  <u0064,u
         clra  
         ldb   #$00
         os9   I$GetStt 
         leax  <-$20,x
         lda   #$01
         sta   <$24,x
         leax  <$20,x
         clra  
         os9   I$SetStt 
         puls  pc,y,x,b,a
L04AD    pshs  y
L04AF    lda   ,x+
         cmpa  #$0D
         lbeq  L0545
         cmpa  #$30
         bcs   L04AF
         cmpa  #$39
         bhi   L04AF
         leax  -$01,x
L04C1    lda   ,x+
         cmpa  #$30
         bcs   L04CD
         cmpa  #$39
         bhi   L04CD
         bra   L04C1
L04CD    pshs  x
         leax  -$01,x
         clr   u000B,u
         clr   u000C,u
         ldd   #$0001
         std   u000D,u
L04DA    lda   ,-x
         cmpa  #$30
         bcs   L050E
         cmpa  #$39
         bhi   L050E
         suba  #$30
         sta   u0002,u
         ldd   #$0000
L04EB    tst   u0002,u
         beq   L04F5
         addd  u000D,u
         dec   u0002,u
         bra   L04EB
L04F5    addd  u000B,u
         std   u000B,u
         lda   #$0A
         sta   u0002,u
         ldd   #$0000
L0500    tst   u0002,u
         beq   L050A
         addd  u000D,u
         dec   u0002,u
         bra   L0500
L050A    std   u000D,u
         bra   L04DA
L050E    ldd   u000B,u
         puls  x
         puls  pc,y
L0514    pshs  y
         std   u000B,u
         lda   #$30
         sta   ,x
         sta   $01,x
         ldd   #$000A
         std   u000D,u
         ldd   u000B,u
         bsr   L0536
         ldd   #$0001
         std   u000D,u
         ldd   u000B,u
         bsr   L0536
         lda   #$0D
         sta   ,x
         puls  pc,y
L0536    subd  u000D,u
         bcs   L053E
         inc   ,x
         bra   L0536
L053E    addd  u000D,u
         std   u000B,u
         leax  $01,x
         rts   
L0545    ldd   #$FFFF
         puls  pc,y
         emod
eom      equ   *
         end
