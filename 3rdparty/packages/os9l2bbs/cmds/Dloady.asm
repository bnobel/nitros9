         nam   Dloady
         ttl   program module       

* Disassembled 2010/01/24 10:42:32 by Disasm v1.5 (C) 1988 by RML

         ifp1
         use   /dd/defs/defsfile
         endc
tylg     set   Prgrm+Objct   
atrv     set   ReEnt+rev
rev      set   $01
         mod   eom,name,tylg,atrv,start,size
u0000    rmb   1
u0001    rmb   1
u0002    rmb   1
u0003    rmb   2
u0005    rmb   1
u0006    rmb   1
u0007    rmb   1
u0008    rmb   1
u0009    rmb   1
u000A    rmb   2
u000C    rmb   10
u0016    rmb   1
u0017    rmb   1
u0018    rmb   1
u0019    rmb   1024
u0419    rmb   1
u041A    rmb   1
u041B    rmb   32
u043B    rmb   2
u043D    rmb   232
size     equ   .
name     equ   *
         fcs   /Dloady/
         fcb   $43 C
         fcb   $6F o
         fcb   $70 p
         fcb   $79 y
         fcb   $72 r
         fcb   $69 i
         fcb   $67 g
         fcb   $68 h
         fcb   $74 t
         fcb   $20 
         fcb   $28 (
         fcb   $43 C
         fcb   $29 )
         fcb   $20 
         fcb   $31 1
         fcb   $39 9
         fcb   $38 8
         fcb   $38 8
         fcb   $42 B
         fcb   $79 y
         fcb   $20 
         fcb   $4B K
         fcb   $65 e
         fcb   $69 i
         fcb   $74 t
         fcb   $68 h
         fcb   $20 
         fcb   $41 A
         fcb   $6C l
         fcb   $70 p
         fcb   $68 h
         fcb   $6F o
         fcb   $6E n
         fcb   $73 s
         fcb   $6F o
         fcb   $4C L
         fcb   $69 i
         fcb   $63 c
         fcb   $65 e
         fcb   $6E n
         fcb   $63 c
         fcb   $65 e
         fcb   $64 d
         fcb   $20 
         fcb   $74 t
         fcb   $6F o
         fcb   $20 
         fcb   $41 A
         fcb   $6C l
         fcb   $70 p
         fcb   $68 h
         fcb   $61 a
         fcb   $20 
         fcb   $53 S
         fcb   $6F o
         fcb   $66 f
         fcb   $74 t
         fcb   $77 w
         fcb   $61 a
         fcb   $72 r
         fcb   $65 e
         fcb   $20 
         fcb   $54 T
         fcb   $65 e
         fcb   $63 c
         fcb   $68 h
         fcb   $6E n
         fcb   $6F o
         fcb   $6C l
         fcb   $6F o
         fcb   $67 g
         fcb   $69 i
         fcb   $65 e
         fcb   $73 s
         fcb   $41 A
         fcb   $6C l
         fcb   $6C l
         fcb   $20 
         fcb   $72 r
         fcb   $69 i
         fcb   $67 g
         fcb   $68 h
         fcb   $74 t
         fcb   $73 s
         fcb   $20 
         fcb   $72 r
         fcb   $65 e
         fcb   $73 s
         fcb   $65 e
         fcb   $72 r
         fcb   $76 v
         fcb   $65 e
         fcb   $64 d
         fcb   $EC l
         fcb   $E6 f
         fcb   $EA j
         fcb   $F5 u
         fcb   $E9 i
         fcb   $A0 
         fcb   $E2 b
         fcb   $ED m
         fcb   $F1 q
         fcb   $E9 i
         fcb   $F0 p
         fcb   $EF o
         fcb   $F4 t
         fcb   $F0 p
L007E    fcb   $45 E
         fcb   $6E n
         fcb   $74 t
         fcb   $65 e
         fcb   $72 r
         fcb   $20 
         fcb   $66 f
         fcb   $69 i
         fcb   $6C l
         fcb   $65 e
         fcb   $6E n
         fcb   $61 a
         fcb   $6D m
         fcb   $65 e
         fcb   $20 
         fcb   $74 t
         fcb   $6F o
         fcb   $20 
         fcb   $64 d
         fcb   $6F o
         fcb   $77 w
         fcb   $6E n
         fcb   $6C l
         fcb   $6F o
         fcb   $61 a
         fcb   $64 d
         fcb   $2D -
         fcb   $2D -
         fcb   $3E >
L009B    fcb   $00 
         fcb   $1D 
L009D    fcb   $46 F
         fcb   $69 i
         fcb   $6C l
         fcb   $65 e
         fcb   $20 
         fcb   $6F o
         fcb   $70 p
         fcb   $65 e
         fcb   $6E n
         fcb   $2C ,
         fcb   $20 
         fcb   $72 r
         fcb   $65 e
         fcb   $61 a
         fcb   $64 d
         fcb   $79 y
         fcb   $20 
         fcb   $74 t
         fcb   $6F o
         fcb   $20 
         fcb   $73 s
         fcb   $65 e
         fcb   $6E n
         fcb   $64 d
         fcb   $2E .
         fcb   $2E .
         fcb   $2E .
         fcb   $0D 
L00B9    fcb   $46 F
         fcb   $69 i
         fcb   $6C l
         fcb   $65 e
         fcb   $20 
         fcb   $74 t
         fcb   $72 r
         fcb   $61 a
         fcb   $6E n
         fcb   $73 s
         fcb   $66 f
         fcb   $65 e
         fcb   $72 r
         fcb   $20 
         fcb   $73 s
         fcb   $75 u
         fcb   $63 c
         fcb   $63 c
         fcb   $65 e
         fcb   $73 s
         fcb   $73 s
         fcb   $66 f
         fcb   $75 u
         fcb   $6C l
         fcb   $0D 
L00D2    fcb   $46 F
         fcb   $69 i
         fcb   $6C l
         fcb   $65 e
         fcb   $20 
         fcb   $74 t
         fcb   $72 r
         fcb   $61 a
         fcb   $6E n
         fcb   $73 s
         fcb   $66 f
         fcb   $65 e
         fcb   $72 r
         fcb   $20 
         fcb   $75 u
         fcb   $6E n
         fcb   $73 s
         fcb   $75 u
         fcb   $63 c
         fcb   $63 c
         fcb   $65 e
         fcb   $73 s
         fcb   $73 s
         fcb   $66 f
         fcb   $75 u
         fcb   $6C l
         fcb   $0D 
L00ED    fcb   $50 P
         fcb   $72 r
         fcb   $65 e
         fcb   $73 s
         fcb   $73 s
         fcb   $20 
         fcb   $3C <
         fcb   $43 C
         fcb   $54 T
         fcb   $52 R
         fcb   $4C L
         fcb   $3E >
         fcb   $3C <
         fcb   $58 X
         fcb   $3E >
         fcb   $20 
         fcb   $74 t
         fcb   $6F o
         fcb   $20 
         fcb   $61 a
         fcb   $62 b
         fcb   $6F o
         fcb   $72 r
         fcb   $74 t
         fcb   $0D 
L0106    fcb   $04 
L0107    fcb   $0A 
         fcb   $0D 
L0109    fcb   $54 T
         fcb   $6F o
         fcb   $74 t
         fcb   $61 a
         fcb   $6C l
         fcb   $20 
         fcb   $6E n
         fcb   $75 u
         fcb   $6D m
         fcb   $62 b
         fcb   $65 e
         fcb   $72 r
         fcb   $20 
         fcb   $6F o
         fcb   $66 f
         fcb   $20 
         fcb   $62 b
         fcb   $6C l
         fcb   $6F o
         fcb   $63 c
         fcb   $6B k
         fcb   $73 s
         fcb   $20 
         fcb   $74 t
         fcb   $6F o
         fcb   $20 
         fcb   $64 d
         fcb   $6F o
         fcb   $77 w
         fcb   $6E n
         fcb   $6C l
         fcb   $6F o
         fcb   $61 a
         fcb   $64 d
         fcb   $3A :
L012C    fcb   $6F o
         fcb   $42 B
         fcb   $30 0
         fcb   $C9 I
         fcb   $04 
         fcb   $3D =
         fcb   $4F O
         fcb   $5F _
         fcb   $10 
         fcb   $3F ?
         fcb   $8D 
         fcb   $30 0
         fcb   $88 
         fcb   $E0 `
         fcb   $6F o
         fcb   $88 
         fcb   $24 $
         fcb   $30 0
         fcb   $C9 I
         fcb   $04 
         fcb   $3D =
         fcb   $4F O
         fcb   $5F _
         fcb   $10 
         fcb   $3F ?
         fcb   $8E 
         fcb   $39 9
start    equ   *
         lda   ,x
         cmpa  #$0D
         bne   L0167
         leax  >L007E,pcr
         ldy   >L009B,pcr
         lda   #$01
         os9   I$Write  
         leax  >u041B,u
         ldy   #$0020
         clra  
         os9   I$ReadLn 
L0167    stx   >u043B,u
         lbsr  L012C
         lda   #$01
         ldx   >u043B,u
         os9   I$Open   
         lbcs  L032E
         sta   ,u
         leax  >L0109,pcr
         ldy   #$0023
         lda   #$01
         os9   I$Write  
         lda   ,u
         ldb   #$02
         pshs  u
         os9   I$GetStt 
         tfr   u,y
         puls  u
         lda   #$0A
         sta   u0007,u
L019B    tfr   x,d
         lsra  
         rorb  
         tfr   d,x
         tfr   y,d
         rora  
         rorb  
         tfr   d,y
         dec   u0007,u
         bne   L019B
         tfr   y,d
         leax  u000C,u
         addd  #$0001
         lbsr  L03AE
         leax  u000C,u
         ldy   #$0005
         lda   #$01
         os9   I$Write  
         leax  >L0107,pcr
         ldy   #$0001
         lda   #$01
         os9   I$WritLn 
         leax  >L00ED,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
         leax  >L009D,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
L01E7    leax  u0001,u
         ldy   #$0001
         clra  
         os9   I$Read   
         lda   u0001,u
         cmpa  #$43
         beq   L0203
         cmpa  #$18
         lbeq  L0320
         cmpa  #$15
         bne   L01E7
         bra   L0207
L0203    lda   #$01
         sta   u0002,u
L0207    lda   #$02
         sta   <u0016,u
         lda   #$01
         sta   <u0017,u
         coma  
         sta   <u0018,u
L0215    leax  <u0019,u
         ldy   #$0400
         lda   ,u
         os9   I$Read   
         lbcs  L02EE
         cmpy  #$0400
         beq   L023D
         tfr   y,d
         leax  d,x
         clra  
L0230    sta   ,x+
         leay  $01,y
         cmpy  #$0400
         bcs   L0230
         leax  <u0019,u
L023D    tst   u0002,u
         bne   L0259
         clr   >u0419,u
         ldy   #$0400
L0249    lda   ,x+
         adda  >u0419,u
         sta   >u0419,u
         leay  -$01,y
         bne   L0249
         bra   L02AA
L0259    ldd   #$0000
         std   >u0419,u
         ldy   #$0400
         sty   u0003,u
L0267    lda   ,x+
         clrb  
         eora  >u0419,u
         eorb  >u041A,u
         std   >u0419,u
         lda   #$08
         sta   u0005,u
L027A    lda   >u0419,u
         bita  #$80
         beq   L0292
         ldd   >u0419,u
         lslb  
         rola  
         eora  #$10
         eorb  #$21
         std   >u0419,u
         bra   L0298
L0292    lslb  
         rola  
         std   >u0419,u
L0298    dec   u0005,u
         bne   L027A
         ldy   u0003,u
         leay  -$01,y
         sty   u0003,u
         bne   L0267
         ldd   >u0419,u
L02AA    leax  <u0016,u
         tst   u0002,u
         beq   L02B7
         ldy   #$0405
         bra   L02BB
L02B7    ldy   #$0404
L02BB    lda   #$01
         os9   I$Write  
         leax  u0001,u
         ldy   #$0001
         clra  
         os9   I$Read   
         lda   u0001,u
         cmpa  #$15
         beq   L02AA
         cmpa  #$06
         beq   L02E0
         cmpa  #$18
         beq   L0320
         cmpa  #$43
         beq   L02AA
         ldb   #$01
         bra   L032E
L02E0    lda   <u0017,u
         inca  
         sta   <u0017,u
         coma  
         sta   <u0018,u
         lbra  L0215
L02EE    cmpb  #$D3
         lbne  L032E
         leax  >L0106,pcr
         ldy   #$0001
         lda   #$01
         os9   I$Write  
         leax  u0001,u
         ldy   #$0001
         clra  
         os9   I$Read   
         lda   u0001,u
         cmpa  #$06
         bne   L0320
         leax  >L00B9,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
         bra   L032D
L0320    leax  >L00D2,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
L032D    clrb  
L032E    pshs  b
         bsr   L0337
         puls  b
         os9   F$Exit   
L0337    leax  >u043D,u
         leax  <-$20,x
         lda   #$01
         sta   <$24,x
         leax  >u043D,u
         clra  
         clrb  
         os9   I$SetStt 
         rts   
         pshs  y
L034F    lda   ,x+
         cmpa  #$30
         bcs   L034F
         cmpa  #$39
         bhi   L034F
         leax  -$01,x
L035B    lda   ,x+
         cmpa  #$30
         bcs   L0367
         cmpa  #$39
         bhi   L0367
         bra   L035B
L0367    pshs  x
         leax  -$01,x
         clr   u0008,u
         clr   u0009,u
         ldd   #$0001
         std   u000A,u
L0374    lda   ,-x
         cmpa  #$30
         bcs   L03A8
         cmpa  #$39
         bhi   L03A8
         suba  #$30
         sta   u0006,u
         ldd   #$0000
L0385    tst   u0006,u
         beq   L038F
         addd  u000A,u
         dec   u0006,u
         bra   L0385
L038F    addd  u0008,u
         std   u0008,u
         lda   #$0A
         sta   u0006,u
         ldd   #$0000
L039A    tst   u0006,u
         beq   L03A4
         addd  u000A,u
         dec   u0006,u
         bra   L039A
L03A4    std   u000A,u
         bra   L0374
L03A8    ldd   u0008,u
         puls  x
         puls  pc,y
L03AE    std   u0008,u
         lda   #$30
         sta   ,x
         sta   $01,x
         sta   $02,x
         sta   $03,x
         sta   $04,x
         ldd   #$2710
         std   u000A,u
         ldd   u0008,u
         lbsr  L03EF
         ldd   #$03E8
         std   u000A,u
         ldd   u0008,u
         bsr   L03EF
         ldd   #$0064
         std   u000A,u
         ldd   u0008,u
         bsr   L03EF
         ldd   #$000A
         std   u000A,u
         ldd   u0008,u
         bsr   L03EF
         ldd   #$0001
         std   u000A,u
         ldd   u0008,u
         bsr   L03EF
         lda   #$0D
         sta   ,x
         rts   
L03EF    subd  u000A,u
         bcs   L03F7
         inc   ,x
         bra   L03EF
L03F7    addd  u000A,u
         std   u0008,u
         leax  $01,x
         rts   
         emod
eom      equ   *
         end
