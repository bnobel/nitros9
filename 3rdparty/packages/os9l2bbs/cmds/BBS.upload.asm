         nam   BBS.upload
         ttl   program module       

* Disassembled 2010/01/24 10:38:45 by Disasm v1.5 (C) 1988 by RML

         ifp1
         use   /dd/defs/defsfile
         endc
tylg     set   Prgrm+Objct   
atrv     set   ReEnt+rev
rev      set   $01
         mod   eom,name,tylg,atrv,start,size
u0000    rmb   1
u0001    rmb   2
u0003    rmb   13
u0010    rmb   2
u0012    rmb   2
u0014    rmb   2
u0016    rmb   6
u001C    rmb   2
u001E    rmb   2
u0020    rmb   2
u0022    rmb   16
u0032    rmb   27
u004D    rmb   2
u004F    rmb   2
u0051    rmb   1
u0052    rmb   64
u0092    rmb   31
u00B1    rmb   124
u012D    rmb   8376
size     equ   .
name     equ   *
         fcs   /BBS.upload/
         fcb   $43 C
         fcb   $6F o
         fcb   $70 p
         fcb   $79 y
         fcb   $72 r
         fcb   $69 i
         fcb   $67 g
         fcb   $68 h
         fcb   $74 t
         fcb   $20 
         fcb   $28 (
         fcb   $43 C
         fcb   $29 )
         fcb   $20 
         fcb   $31 1
         fcb   $39 9
         fcb   $38 8
         fcb   $38 8
         fcb   $42 B
         fcb   $79 y
         fcb   $20 
         fcb   $4B K
         fcb   $65 e
         fcb   $69 i
         fcb   $74 t
         fcb   $68 h
         fcb   $20 
         fcb   $41 A
         fcb   $6C l
         fcb   $70 p
         fcb   $68 h
         fcb   $6F o
         fcb   $6E n
         fcb   $73 s
         fcb   $6F o
         fcb   $4C L
         fcb   $69 i
         fcb   $63 c
         fcb   $65 e
         fcb   $6E n
         fcb   $63 c
         fcb   $65 e
         fcb   $64 d
         fcb   $20 
         fcb   $74 t
         fcb   $6F o
         fcb   $20 
         fcb   $41 A
         fcb   $6C l
         fcb   $70 p
         fcb   $68 h
         fcb   $61 a
         fcb   $20 
         fcb   $53 S
         fcb   $6F o
         fcb   $66 f
         fcb   $74 t
         fcb   $77 w
         fcb   $61 a
         fcb   $72 r
         fcb   $65 e
         fcb   $20 
         fcb   $54 T
         fcb   $65 e
         fcb   $63 c
         fcb   $68 h
         fcb   $6E n
         fcb   $6F o
         fcb   $6C l
         fcb   $6F o
         fcb   $67 g
         fcb   $69 i
         fcb   $65 e
         fcb   $73 s
         fcb   $41 A
         fcb   $6C l
         fcb   $6C l
         fcb   $20 
         fcb   $72 r
         fcb   $69 i
         fcb   $67 g
         fcb   $68 h
         fcb   $74 t
         fcb   $73 s
         fcb   $20 
         fcb   $72 r
         fcb   $65 e
         fcb   $73 s
         fcb   $65 e
         fcb   $72 r
         fcb   $76 v
         fcb   $65 e
         fcb   $64 d
         fcb   $EC l
         fcb   $E6 f
         fcb   $EA j
         fcb   $F5 u
         fcb   $E9 i
         fcb   $A0 
         fcb   $E2 b
         fcb   $ED m
         fcb   $F1 q
         fcb   $E9 i
         fcb   $F0 p
         fcb   $EF o
         fcb   $F4 t
         fcb   $F0 p
L0082    fcb   $55 U
         fcb   $6C l
         fcb   $6F o
         fcb   $61 a
         fcb   $64 d
         fcb   $78 x
         fcb   $0D 
L0089    fcb   $55 U
         fcb   $6C l
         fcb   $6F o
         fcb   $61 a
         fcb   $64 d
         fcb   $78 x
         fcb   $63 c
         fcb   $0D 
L0091    fcb   $55 U
         fcb   $6C l
         fcb   $6F o
         fcb   $61 a
         fcb   $64 d
         fcb   $79 y
         fcb   $0D 
L0098    fcb   $55 U
         fcb   $6C l
         fcb   $6F o
         fcb   $61 a
         fcb   $64 d
         fcb   $79 y
         fcb   $62 b
         fcb   $0D 
L00A0    fcb   $55 U
         fcb   $6C l
         fcb   $6F o
         fcb   $61 a
         fcb   $64 d
         fcb   $61 a
         fcb   $0D 
L00A7    fcb   $45 E
         fcb   $6E n
         fcb   $74 t
         fcb   $65 e
         fcb   $72 r
         fcb   $20 
         fcb   $79 y
         fcb   $6F o
         fcb   $75 u
         fcb   $72 r
         fcb   $20 
         fcb   $75 u
         fcb   $70 p
         fcb   $6C l
         fcb   $6F o
         fcb   $61 a
         fcb   $64 d
         fcb   $20 
         fcb   $70 p
         fcb   $72 r
         fcb   $6F o
         fcb   $74 t
         fcb   $6F o
         fcb   $63 c
         fcb   $6F o
         fcb   $6C l
         fcb   $0D 
L00C2    fcb   $0A 
         fcb   $0D 
         fcb   $5B [
         fcb   $41 A
         fcb   $5D ]
         fcb   $20 
         fcb   $41 A
         fcb   $73 s
         fcb   $63 c
         fcb   $69 i
         fcb   $69 i
         fcb   $0A 
         fcb   $0D 
         fcb   $5B [
         fcb   $58 X
         fcb   $5D ]
         fcb   $20 
         fcb   $78 x
         fcb   $6D m
         fcb   $6F o
         fcb   $64 d
         fcb   $65 e
         fcb   $6D m
         fcb   $0A 
         fcb   $0D 
         fcb   $5B [
         fcb   $43 C
         fcb   $5D ]
         fcb   $20 
         fcb   $78 x
         fcb   $6D m
         fcb   $6F o
         fcb   $64 d
         fcb   $65 e
         fcb   $6D m
         fcb   $20 
         fcb   $28 (
         fcb   $43 C
         fcb   $52 R
         fcb   $43 C
         fcb   $29 )
         fcb   $0A 
         fcb   $0D 
         fcb   $5B [
         fcb   $59 Y
         fcb   $5D ]
         fcb   $20 
         fcb   $79 y
         fcb   $6D m
         fcb   $6F o
         fcb   $64 d
         fcb   $65 e
         fcb   $6D m
         fcb   $0A 
         fcb   $0D 
         fcb   $5B [
         fcb   $51 Q
         fcb   $5D ]
         fcb   $20 
         fcb   $71 q
         fcb   $75 u
         fcb   $69 i
         fcb   $74 t
         fcb   $0A 
         fcb   $0D 
         fcb   $50 P
         fcb   $72 r
         fcb   $6F o
         fcb   $74 t
         fcb   $6F o
         fcb   $63 c
         fcb   $6F o
         fcb   $6C l
         fcb   $3F ?
L010C    fcb   $45 E
         fcb   $6E n
         fcb   $74 t
         fcb   $65 e
         fcb   $72 r
         fcb   $20 
         fcb   $66 f
         fcb   $69 i
         fcb   $6C l
         fcb   $65 e
         fcb   $6E n
         fcb   $61 a
         fcb   $6D m
         fcb   $65 e
         fcb   $20 
         fcb   $74 t
         fcb   $6F o
         fcb   $20 
         fcb   $75 u
         fcb   $70 p
         fcb   $6C l
         fcb   $6F o
         fcb   $61 a
         fcb   $64 d
         fcb   $3A :
L0125    fcb   $44 D
         fcb   $4C L
         fcb   $44 D
         fcb   $2E .
         fcb   $6C l
         fcb   $73 s
         fcb   $74 t
         fcb   $0D 
L012D    fcb   $0D 
         fcb   $0A 
L012F    fcb   $45 E
         fcb   $6E n
         fcb   $74 t
         fcb   $65 e
         fcb   $72 r
         fcb   $20 
         fcb   $61 a
         fcb   $20 
         fcb   $6F o
         fcb   $6E n
         fcb   $65 e
         fcb   $2D -
         fcb   $6C l
         fcb   $69 i
         fcb   $6E n
         fcb   $65 e
         fcb   $20 
         fcb   $64 d
         fcb   $65 e
         fcb   $73 s
         fcb   $63 c
         fcb   $72 r
         fcb   $69 i
         fcb   $70 p
         fcb   $74 t
         fcb   $69 i
         fcb   $6F o
         fcb   $6E n
         fcb   $20 
         fcb   $6F o
         fcb   $66 f
         fcb   $20 
         fcb   $74 t
         fcb   $68 h
         fcb   $69 i
         fcb   $73 s
         fcb   $20 
         fcb   $66 f
         fcb   $69 i
         fcb   $6C l
         fcb   $65 e
         fcb   $0D 
L0159    fcb   $3E >
         fcb   $0D 
L015B    fcb   $2F /
         fcb   $64 d
         fcb   $64 d
         fcb   $2F /
         fcb   $62 b
         fcb   $62 b
         fcb   $73 s
         fcb   $2F /
         fcb   $42 B
         fcb   $42 B
         fcb   $53 S
         fcb   $2E .
         fcb   $75 u
         fcb   $73 s
         fcb   $65 e
         fcb   $72 r
         fcb   $73 s
         fcb   $74 t
         fcb   $61 a
         fcb   $74 t
         fcb   $73 s
         fcb   $0D 
start    equ   *
         lda   ,x
         cmpa  #$0D
         beq   L0180
         lda   #$01
         os9   I$ChgDir 
         lbcs  L04B2
L0180    leax  >L0125,pcr
         lda   #$03
         os9   I$Open   
         bcs   L018F
         sta   u0001,u
         bra   L01A0
L018F    cmpb  #$D8
         lbne  L04B2
         ldb   #$1B
         os9   I$Create 
         lbcs  L04B2
         sta   u0001,u
L01A0    leax  >L00A7,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
         leax  >L00C2,pcr
         ldy   #$004A
         lda   #$01
         os9   I$Write  
         leax  ,u
         ldy   #$0001
         lda   #$01
         os9   I$Read   
         leax  >L012D,pcr
         ldy   #$0001
         lda   #$01
         os9   I$WritLn 
         lda   ,u
         anda  #$DF
         cmpa  #$41
         lbeq  L01F6
         cmpa  #$58
         lbeq  L023A
         cmpa  #$43
         lbeq  L027E
         cmpa  #$59
         lbeq  L02C6
         cmpa  #$51
         lbeq  L04B1
         bra   L0180
L01F6    leax  >L010C,pcr
         ldy   #$0019
         lda   #$01
         os9   I$Write  
         leax  <u0032,u
         ldy   #$001B
         clra  
         os9   I$ReadLn 
         bcs   L01F6
         cmpy  #$0001
         lbls  L04B1
         lda   #$11
         ldb   #$03
         leax  >L00A0,pcr
         pshs  u
         leau  <u0032,u
         os9   F$Fork   
         lbcs  L04B2
         clrb  
         os9   F$Wait   
         tstb  
         lbne  L04B2
         puls  u
         lbra  L0336
L023A    leax  >L010C,pcr
         ldy   #$0019
         lda   #$01
         os9   I$Write  
         leax  <u0032,u
         ldy   #$001B
         clra  
         os9   I$ReadLn 
         bcs   L023A
         cmpy  #$0001
         lbls  L04B1
         lda   #$11
         ldb   #$03
         leax  >L0082,pcr
         pshs  u
         leau  <u0032,u
         os9   F$Fork   
         lbcs  L04B2
         clrb  
         os9   F$Wait   
         tstb  
         lbne  L04B2
         puls  u
         lbra  L0336
L027E    leax  >L010C,pcr
         ldy   #$0019
         lda   #$01
         os9   I$Write  
         leax  <u0032,u
         ldy   #$001B
         clra  
         os9   I$ReadLn 
         bcs   L027E
         cmpy  #$0001
         lbls  L04B1
         lda   #$11
         ldb   #$03
         leax  >L0089,pcr
         pshs  u
         leau  <u0032,u
         os9   F$Fork   
         lbcs  L04B2
         clrb  
         os9   F$Wait   
         lbcs  L04B2
         tstb  
         lbne  L04B2
         puls  u
         lbra  L0336
L02C6    leax  >L010C,pcr
         ldy   #$0019
         lda   #$01
         os9   I$Write  
         leax  <u0032,u
         ldy   #$001B
         clra  
         os9   I$ReadLn 
         bcs   L02C6
         cmpy  #$0001
         lbls  L04B1
         lda   #$11
         ldb   #$03
         leax  >L0091,pcr
         pshs  u
         leau  <u0032,u
         os9   F$Fork   
         lbcs  L04B2
         clrb  
         os9   F$Wait   
         lbcs  L04B2
         tstb  
         lbne  L04B2
         puls  u
         lbra  L0336
         lda   #$11
         ldy   #$0001
         ldb   #$03
         leax  >L0098,pcr
         pshs  u
         leau  >u012D,u
         os9   F$Fork   
         lbcs  L04B2
         clrb  
         os9   F$Wait   
         lbcs  L04B2
         tstb  
         lbne  L04B2
         puls  u
L0336    lda   u0001,u
         leax  >u0092,u
         ldy   #$0060
         os9   I$Read   
         bcs   L0359
         leay  <u0032,u
L0348    lda   ,x+
         cmpa  ,y+
         bne   L0336
         cmpa  #$0D
         beq   L0354
         bra   L0348
L0354    ldb   #$DA
         lbra  L04B2
L0359    cmpb  #$D3
         lbne  L04B2
         lda   u0001,u
         ldb   #$05
         ldx   #$0000
         pshs  u
         ldu   #$0000
         os9   I$Seek   
         puls  u
L0370    lda   u0001,u
         leax  >u0092,u
         ldy   #$0060
         os9   I$Read   
         bcs   L03A7
         lda   >u00B1,u
         cmpa  #$01
         bne   L0370
         lda   u0001,u
         ldb   #$05
         pshs  u
         os9   I$GetStt 
         tfr   u,d
         subd  #$0060
         bge   L0399
         leax  -$01,x
L0399    ldy   ,s
         tfr   d,u
         lda   $01,y
         os9   I$Seek   
         puls  u
         bra   L03AD
L03A7    cmpb  #$D3
         lbne  L04B2
L03AD    ldx   #$0000
         ldy   #$0000
         stx   <u004D,u
         sty   <u004F,u
         leax  >L012F,pcr
         ldy   #$00C8
         lda   #$01
         os9   I$WritLn 
         leax  >L0159,pcr
         ldy   #$0001
         os9   I$Write  
         leax  <u0052,u
         ldy   #$0040
         clra  
         os9   I$ReadLn 
         clr   <u0051,u
         leax  <u0032,u
         ldy   #$FFFF
         sty   <u004D,u
         sty   <u004F,u
         ldy   #$0060
         lda   u0001,u
         os9   I$Write  
         leax  >L015B,pcr
         lda   #$03
         os9   I$Open   
         bcc   L040D
         ldb   #$1B
         os9   I$Create 
         lbcs  L04B2
L040D    sta   u0003,u
         os9   F$ID     
         sty   <u0010,u
L0416    leax  <u0012,u
         ldy   #$0020
         lda   u0003,u
         os9   I$Read   
         bcs   L042F
         ldd   <u0012,u
         cmpd  <u0010,u
         bne   L0416
         bra   L0438
L042F    cmpb  #$D3
         lbne  L04B2
         lbra  L0476
L0438    ldd   <u0022,u
         addd  #$0001
         std   <u0022,u
         lda   u0003,u
         ldb   #$05
         pshs  u
         os9   I$GetStt 
         tfr   u,d
         subd  #$0020
         bge   L0453
         leax  -$01,x
L0453    ldu   ,s
         tfr   d,y
         lda   u0003,u
         tfr   y,u
         os9   I$Seek   
         lbcs  L04B2
         puls  u
         leax  <u0012,u
         ldy   #$0020
         lda   u0003,u
         os9   I$Write  
         os9   I$Close  
         lbra  L04B1
L0476    leax  <u0012,u
         ldd   #$0001
         std   <u0014,u
         std   <u001E,u
         ldd   #$0000
         std   <u001C,u
         std   <u0022,u
         std   <u0020,u
         ldd   <u0010,u
         std   <u0012,u
         leax  <u0016,u
         os9   F$Time   
         lbcs  L04B2
         leax  <u0012,u
         ldy   #$0020
         lda   u0003,u
         os9   I$Write  
         os9   I$Close  
         lbcs  L04B2
L04B1    clrb  
L04B2    os9   F$Exit   
         emod
eom      equ   *
         end
